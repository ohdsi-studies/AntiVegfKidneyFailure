{
  "ConceptSets": [
    {
      "id": 1,
      "name": "[SOS] Age related Macular Degeneration",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "267718000",
              "CONCEPT_ID": 374028,
              "CONCEPT_NAME": "Age related macular degeneration",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "422338006",
              "CONCEPT_ID": 4224741,
              "CONCEPT_NAME": "Degenerative disorder of macula",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            }
          }
        ]
      }
    },
    {
      "id": 2,
      "name": "[SOS] Diabetic retinopathy",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "4855003",
              "CONCEPT_ID": 4174977,
              "CONCEPT_NAME": "Retinopathy due to diabetes mellitus",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "includeDescendants": true
          }
        ]
      }
    },
    {
      "id": 3,
      "name": "[SOS] Macular edema",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "37231002",
              "CONCEPT_ID": 4290333,
              "CONCEPT_NAME": "Macular retinal edema",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "312920004",
              "CONCEPT_ID": 4208200,
              "CONCEPT_NAME": "Postoperative cystoid macular edema",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "isExcluded": true,
            "includeDescendants": true
          }
        ]
      }
    },
    {
      "id": 4,
      "name": "[SOS] Retinal Vein Occlusion",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "73757007",
              "CONCEPT_ID": 440392,
              "CONCEPT_NAME": "Retinal vascular occlusion",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "232035005",
              "CONCEPT_ID": 4334245,
              "CONCEPT_NAME": "Retinal artery occlusion",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "isExcluded": true,
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "50821009",
              "CONCEPT_ID": 437544,
              "CONCEPT_NAME": "Arterial retinal branch occlusion",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "isExcluded": true,
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "232036006",
              "CONCEPT_ID": 4338905,
              "CONCEPT_NAME": "Cilioretinal artery occlusion",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "isExcluded": true,
            "includeDescendants": true
          }
        ]
      }
    },
    {
      "id": 5,
      "name": "[SOS] aflibercept ranibizumab and bevacizumab",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Ingredient",
              "CONCEPT_CODE": "1232150",
              "CONCEPT_ID": 40244266,
              "CONCEPT_NAME": "aflibercept",
              "DOMAIN_ID": "Drug",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "RxNorm"
            },
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Ingredient",
              "CONCEPT_CODE": "253337",
              "CONCEPT_ID": 1397141,
              "CONCEPT_NAME": "bevacizumab",
              "DOMAIN_ID": "Drug",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "RxNorm"
            },
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Ingredient",
              "CONCEPT_CODE": "595060",
              "CONCEPT_ID": 19080982,
              "CONCEPT_NAME": "ranibizumab",
              "DOMAIN_ID": "Drug",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "RxNorm"
            },
            "includeDescendants": true
          }
        ]
      }
    },
    {
      "id": 7,
      "name": "[SOS] Malignant neoplasms excluding non-melanoma skin cancer",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "254701007",
              "CONCEPT_ID": 4112752,
              "CONCEPT_NAME": "Basal cell carcinoma of skin",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "isExcluded": true,
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "254651007",
              "CONCEPT_ID": 4111921,
              "CONCEPT_NAME": "Squamous cell carcinoma of skin",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "isExcluded": true,
            "includeDescendants": true
          },
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Clinical Finding",
              "CONCEPT_CODE": "363346000",
              "CONCEPT_ID": 443392,
              "CONCEPT_NAME": "Malignant neoplastic disease",
              "DOMAIN_ID": "Condition",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "SNOMED"
            },
            "includeDescendants": true
          }
        ]
      }
    },
    {
      "id": 9,
      "name": "[SOS] ranibizumab",
      "expression": {
        "items": [
          {
            "concept": {
              "CONCEPT_CLASS_ID": "Ingredient",
              "CONCEPT_CODE": "595060",
              "CONCEPT_ID": 19080982,
              "CONCEPT_NAME": "ranibizumab",
              "DOMAIN_ID": "Drug",
              "INVALID_REASON": "V",
              "INVALID_REASON_CAPTION": "Valid",
              "STANDARD_CONCEPT": "S",
              "STANDARD_CONCEPT_CAPTION": "Standard",
              "VOCABULARY_ID": "RxNorm"
            },
            "includeDescendants": true
          }
        ]
      }
    }
  ],
  "PrimaryCriteria": {
    "CriteriaList": [
      {
        "DrugExposure": {
          "CodesetId": 9
        }
      }
    ],
    "ObservationWindow": {
      "PriorDays": 0,
      "PostDays": 0
    },
    "PrimaryCriteriaLimit": {
      "Type": "All"
    }
  },
  "QualifiedLimit": {
    "Type": "First"
  },
  "ExpressionLimit": {
    "Type": "All"
  },
  "InclusionRules": [
    {
      "name": "has at least 1 prior exposure with 2 or more prior exposures in 21-70d with blinding disease and no other cancer and 365d before first",
      "expression": {
        "Type": "ALL",
        "CriteriaList": [
          {
            "Criteria": {
              "DrugExposure": {
                "CorrelatedCriteria": {
                  "Type": "ALL",
                  "CriteriaList": [
                    {
                      "Criteria": {
                        "DrugExposure": {
                          "CorrelatedCriteria": {
                            "Type": "ALL",
                            "CriteriaList": [
                              {
                                "Criteria": {
                                  "DrugExposure": {
                                    "CorrelatedCriteria": {
                                      "Type": "ALL",
                                      "CriteriaList": [
                                        {
                                          "Criteria": {
                                            "ObservationPeriod": {}
                                          },
                                          "StartWindow": {
                                            "Start": {
                                              "Coeff": -1
                                            },
                                            "End": {
                                              "Days": 365,
                                              "Coeff": -1
                                            },
                                            "UseEventEnd": false
                                          },
                                          "EndWindow": {
                                            "Start": {
                                              "Days": 0,
                                              "Coeff": 1
                                            },
                                            "End": {
                                              "Coeff": 1
                                            },
                                            "UseEventEnd": true
                                          },
                                          "Occurrence": {
                                            "Type": 2,
                                            "Count": 1
                                          }
                                        },
                                        {
                                          "Criteria": {
                                            "DrugExposure": {
                                              "CodesetId": 5
                                            }
                                          },
                                          "StartWindow": {
                                            "Start": {
                                              "Coeff": -1
                                            },
                                            "End": {
                                              "Days": 1,
                                              "Coeff": -1
                                            },
                                            "UseEventEnd": false
                                          },
                                          "IgnoreObservationPeriod": true,
                                          "Occurrence": {
                                            "Type": 0,
                                            "Count": 0
                                          }
                                        },
                                        {
                                          "Criteria": {
                                            "ConditionOccurrence": {
                                              "CodesetId": 7
                                            }
                                          },
                                          "StartWindow": {
                                            "Start": {
                                              "Coeff": -1
                                            },
                                            "End": {
                                              "Days": 0,
                                              "Coeff": -1
                                            },
                                            "UseEventEnd": false
                                          },
                                          "IgnoreObservationPeriod": true,
                                          "Occurrence": {
                                            "Type": 0,
                                            "Count": 0
                                          }
                                        }
                                      ],
                                      "DemographicCriteriaList": [],
                                      "Groups": [
                                        {
                                          "Type": "ANY",
                                          "CriteriaList": [
                                            {
                                              "Criteria": {
                                                "ConditionOccurrence": {
                                                  "CodesetId": 4
                                                }
                                              },
                                              "StartWindow": {
                                                "Start": {
                                                  "Coeff": -1
                                                },
                                                "End": {
                                                  "Days": 0,
                                                  "Coeff": -1
                                                },
                                                "UseEventEnd": false
                                              },
                                              "Occurrence": {
                                                "Type": 2,
                                                "Count": 1
                                              }
                                            },
                                            {
                                              "Criteria": {
                                                "ConditionOccurrence": {
                                                  "CodesetId": 1
                                                }
                                              },
                                              "StartWindow": {
                                                "Start": {
                                                  "Coeff": -1
                                                },
                                                "End": {
                                                  "Days": 0,
                                                  "Coeff": 1
                                                },
                                                "UseEventEnd": false
                                              },
                                              "Occurrence": {
                                                "Type": 2,
                                                "Count": 1
                                              }
                                            },
                                            {
                                              "Criteria": {
                                                "ConditionOccurrence": {
                                                  "CodesetId": 2
                                                }
                                              },
                                              "StartWindow": {
                                                "Start": {
                                                  "Coeff": -1
                                                },
                                                "End": {
                                                  "Days": 0,
                                                  "Coeff": 1
                                                },
                                                "UseEventEnd": false
                                              },
                                              "Occurrence": {
                                                "Type": 2,
                                                "Count": 1
                                              }
                                            },
                                            {
                                              "Criteria": {
                                                "ConditionOccurrence": {
                                                  "CodesetId": 3
                                                }
                                              },
                                              "StartWindow": {
                                                "Start": {
                                                  "Coeff": -1
                                                },
                                                "End": {
                                                  "Days": 0,
                                                  "Coeff": -1
                                                },
                                                "UseEventEnd": false
                                              },
                                              "Occurrence": {
                                                "Type": 2,
                                                "Count": 1
                                              }
                                            }
                                          ],
                                          "DemographicCriteriaList": [],
                                          "Groups": []
                                        }
                                      ]
                                    },
                                    "CodesetId": 9,
                                    "First": true
                                  }
                                },
                                "StartWindow": {
                                  "Start": {
                                    "Days": 70,
                                    "Coeff": -1
                                  },
                                  "End": {
                                    "Days": 21,
                                    "Coeff": -1
                                  },
                                  "UseEventEnd": false
                                },
                                "Occurrence": {
                                  "Type": 2,
                                  "Count": 1
                                }
                              }
                            ],
                            "DemographicCriteriaList": [],
                            "Groups": []
                          },
                          "CodesetId": 9
                        }
                      },
                      "StartWindow": {
                        "Start": {
                          "Days": 70,
                          "Coeff": -1
                        },
                        "End": {
                          "Days": 21,
                          "Coeff": -1
                        },
                        "UseEventEnd": false
                      },
                      "Occurrence": {
                        "Type": 2,
                        "Count": 1
                      }
                    }
                  ],
                  "DemographicCriteriaList": [],
                  "Groups": []
                },
                "CodesetId": 9
              }
            },
            "StartWindow": {
              "Start": {
                "Coeff": -1
              },
              "End": {
                "Days": 0,
                "Coeff": -1
              },
              "UseEventEnd": false
            },
            "Occurrence": {
              "Type": 2,
              "Count": 1
            }
          }
        ],
        "DemographicCriteriaList": [],
        "Groups": []
      }
    }
  ],
  "EndStrategy": {
    "CustomEra": {
      "DrugCodesetId": 9,
      "GapDays": 180,
      "Offset": 0
    }
  },
  "CensoringCriteria": [],
  "CollapseSettings": {
    "CollapseType": "ERA",
    "EraPad": 0
  },
  "CensorWindow": {},
  "cdmVersionRange": ">=5.0.0"
}